link Q=only using mvc


Working with Entity Framework in .NET Core application




1) Install NuGet packages


Either using NuGet Package Manager by right clicking on Project and Select Manage NuGet Package
Now select following packages as per .net core project version
Microsoft.VisualStudio.Web.CodeGeneration.Design
Microsoft.EntityFrameworkCore.Tools
Microsoft.EntityFrameworkCore.SqlServer


OR Open NuGet Package Manager Console through Tools -> NuGet Package Manager -> Package Manager Console and use following command for required packages. (Note : change package version as per .Net Core application version)
Install-Package Microsoft.VisualStudio.Web.CodeGeneration.Design -Version 3.1.4
Install-Package Microsoft.EntityFrameworkCore.Tools -Version 3.1.8
Install-Package Microsoft.EntityFrameworkCore.SqlServer -Version 3.1.8


2) Create database and prepare connection string


3) Use following command for scaffolding EF from Database


Scaffold-DbContext "Connection String;Trusted_Connection=True;" Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models


Update connection string in scaffold command.
e.g. 
Scaffold-DbContext "Data Source=DESKTOP-TU99FBG\JOSHISQLSERVER;Initial Catalog=DICTDB;Integrated Security=True;Trusted_Connection=True;" Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models




OR
Use .NET CLI Command 


dotnet user-secrets set ConnectionStrings:DBConnectionString "DESKTOP-TU99FBG\JOSHISQLSERVER;Initial Catalog=DICTDB;Integrated Security=True;Trusted_Connection=True;"


dotnet ef dbcontext scaffold Name=ConnectionStrings:DBConnectionString Microsoft.EntityFrameworkCore.SqlServer 


4) Write connection string in appsettings.json file.
,
  "ConnectionStrings": {
    "DBConnectionString": "Connection String;"
  }


Update connection string as per selected database connection string.


5) Write following statement in startup.cs file in ConfigureServices method.


services.AddDbContext<DICTDBContext>(o => o.UseSqlServer(Configuration.GetConnectionString("DBConnectionString")));


Update DataContext object as per Entity created by Scaffolding and also update connection string defined in appsettings.json file.


6) Create Controller and View using EF. This will auto generate both using EF.





 
